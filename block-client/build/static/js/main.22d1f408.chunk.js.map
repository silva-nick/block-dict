{"version":3,"sources":["api/index.js","App.js","index.js"],"names":["querystring","require","api","axios","create","baseURL","apis","getCharByChar","char","get","getDefsByChars","charList","post","stringify","Block","props","state","color","selected","handleClick","bind","this","setState","callback","style","backgroundColor","className","onClick","value","React","Component","BigBlock","open","width","height","transform","transition","class","simplified","pinyin","english","landing","Type","to","start","App","selectedCallback","console","log","words","handleChange","event","currentWords","target","replace","split","length","wordSet","Set","oldWord","indexOf","newWord","Object","keys","addDefines","forceUpdate","inputWords","then","data","pop","word","parse","push","blockList","defineList","define","type","placeholder","autoFocus","onChange","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.22d1f408.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst querystring = require(\"querystring\");\r\n\r\nconst api = axios.create({\r\n  baseURL: \"http://localhost:3001/api/\",\r\n});\r\n\r\n//export const getCharByChar = (char) => api.get(`/char/${char}`);\r\nexport const getCharByChar = (char) => api.get(`/char/${char}`);\r\nexport const getDefsByChars = (charList) =>\r\n  api.post(`/dictionary`, querystring.stringify(charList));\r\n\r\nconst apis = { getCharByChar, getDefsByChars };\r\n\r\nexport default apis;\r\n","import React from \"react\";\nimport \"./App.css\";\nimport api from \"./api\";\n\nconst querystring = require(\"querystring\");\n\nfunction randomColor() {\n  return [\n    Math.round(Math.random() * 105 + 150),\n    Math.round(Math.random() * 105 + 150),\n    Math.round(Math.random() * 105 + 150),\n  ];\n}\n\nclass Block extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { color: \"#EADAAC\", selected: false };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick() {\n    this.state.selected = !this.state.selected;\n    this.setState((state) => ({\n      color: this.state.selected ? `#D6B85C` : \"#EADAAC\",\n    }));\n    this.props.callback(this.state.selected);\n  }\n\n  render() {\n    const style = {\n      //backgroundColor: `rgb(${randomColor()})`,\n      backgroundColor: this.state.color,\n    };\n\n    return (\n      <div className=\"block\" style={style}>\n        <text onClick={this.handleClick}>{this.props.value}</text>\n      </div>\n    );\n  }\n}\n\nclass BigBlock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { open: false };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick() {\n    this.setState((state) => ({\n      open: !state.open,\n    }));\n  }\n\n  render() {\n    if (this.state.open) {\n      const styles = {\n        width: `180px`,\n        height: `180px`,\n        transform: `translatex(0px) translatey(0px) rotatey(-180deg) `,\n        transition: `all .5s cubic-bezier(0.62, 0.4, 0.5, 0.91)`,\n      };\n      return (\n        <div className=\"output-block\" onClick={this.handleClick} style={styles}>\n          <div class=\"flip-card-front\">\n            <text>{this.props.value.simplified}</text>\n          </div>\n          <div class=\"flip-card-back\">\n            <div className=\"pinyin\">\n              <text>{this.props.value.pinyin}</text>\n            </div>\n            <div className=\"definition\">\n              <text>{this.props.value.english}</text>\n            </div>\n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"output-block\" onClick={this.handleClick}>\n          <div class=\"flip-card-front\">\n            <text>{this.props.value.simplified}</text>\n          </div>\n          <div class=\"flip-card-back\">\n            <div className=\"pinyin\">\n              <text>{this.props.value.pinyin}</text>\n            </div>\n            <div className=\"definition\">\n              <text>{this.props.value.english}</text>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\n/*-------------------------START OF APP-------------------------*/\nconst landing = {\n  Type: [{ simplified: \"\\u5f00\", pinyin: \"kai1\", english: \"open\" }],\n  to: [{ simplified: \"\\u59cb\", pinyin: \"shi3\", english: \"beginning\" }],\n  start: [\n    { simplified: \"\\u5427!\", pinyin: \"ba\", english: \"suggestive particle\" },\n  ],\n};\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      words: landing,\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    //alert(\"test \" + event.target.value);\n    const currentWords = event.target.value\n      .replace(/[.,\\/\\^&\\*;:{}=\\-_`~()]/g, \"\")\n      .split(\"\");\n    if (currentWords.length === 0) {\n      this.setState({\n        words: {\n          Type: [{ simplified: \"\\u5f00\", pinyin: \"kai1\", english: \"open\" }],\n          to: [{ simplified: \"\\u59cb\", pinyin: \"shi3\", english: \"beginning\" }],\n          start: [\n            {\n              simplified: \"\\u5427!\",\n              pinyin: \"ba\",\n              english: \"suggestive particle\",\n            },\n          ],\n        },\n      });\n    } else {\n      const wordSet = [...new Set(currentWords)];\n      //alert(wordSet + \"  and  \" + Object.keys(this.state.words));\n      for (const oldWord in this.state.words) {\n        if (wordSet.indexOf(oldWord) === -1) {\n          delete this.state.words[oldWord];\n          //deleted\n        }\n      }\n      for (const newWord of wordSet) {\n        if (Object.keys(this.state.words).indexOf(newWord) === -1) {\n          //added\n          //this.state.words.put(wordSet[i]);\n          this.state.words[newWord] = [];\n          this.addDefines(Object.keys(this.state.words), newWord);\n        }\n      }\n      this.forceUpdate();\n    }\n  }\n\n  async addDefines(inputWords, newWord) {\n    await api.getDefsByChars(inputWords).then((words) => {\n      //alert(words.data);\n      if (words) {\n        words = words.data.split(\"}\");\n        words.pop();\n        //alert(words);\n        for (let word of words) {\n          word = querystring.parse(word);\n          if (this.state.words[newWord].indexOf(word) === -1)\n            this.state.words[newWord].push(word);\n        }\n        this.forceUpdate();\n      }\n    });\n  }\n\n  selectedCallback = (selected) => {\n    console.log(selected);\n  };\n\n  render() {\n    const blockList = [];\n    const defineList = [];\n    for (const word in this.state.words) {\n      blockList.push(<Block value={word} callback={this.selectedCallback} />);\n      for (const define of this.state.words[word]) {\n        defineList.push(<BigBlock value={define} />);\n      }\n    }\n\n    return (\n      <div className=\"App\">\n        <div className=\"translation-bar\">\n          <text class=\"title\">Translate a word </text>\n          <input\n            type=\"text\"\n            placeholder=\"Search..\"\n            autoFocus\n            onChange={this.handleChange}\n          ></input>\n        </div>\n        <div className=\"input-blocks\">{blockList}</div>\n        <div className=\"output-blocks\">{defineList}</div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}